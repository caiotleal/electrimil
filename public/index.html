<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ELECTRI1000 | Manutenção Inteligente</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <style>
        body { background-color: #0a0a0c; color: #ffffff; scroll-behavior: smooth; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        
        /* Modo Edição */
        .editable-active { border: 2px dashed #3b82f6; cursor: text; padding: 2px; border-radius: 4px; background: rgba(59, 130, 246, 0.1); }
        .editable-active:focus { outline: none; border-color: #facc15; background: rgba(250, 204, 21, 0.1); }
        
        /* Painel Admin */
        #adminPanel {
            position: fixed; bottom: 20px; left: 20px; z-index: 9999;
            background: #111; border: 1px solid #333; padding: 20px; border-radius: 12px;
            display: none; box-shadow: 0 0 30px rgba(0,0,0,0.9); width: 300px;
        }
        
        .whatsapp-btn {
            position: fixed; bottom: 30px; right: 30px; background-color: #25d366;
            color: white; width: 60px; height: 60px; border-radius: 50px;
            display: flex; align-items: center; justify-content: center;
            font-size: 30px; box-shadow: 2px 2px 20px rgba(0,0,0,0.5); z-index: 1000;
            transition: transform 0.3s ease;
        }
        .whatsapp-btn:hover { transform: scale(1.1); }
    </style>
</head>
<body class="font-sans antialiased overflow-x-hidden">

    <div id="adminPanel">
        <h3 class="text-white font-bold mb-4 text-lg border-b border-gray-700 pb-2">
            <i class="fab fa-github"></i> Painel GitHub
        </h3>
        
        <div id="statusMsg" class="text-xs text-gray-400 mb-4">Pronto para editar.</div>

        <button onclick="saveToGitHub()" id="btnSave" class="bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 w-full mb-3 text-sm font-bold transition">
            <i class="fas fa-cloud-upload-alt"></i> PUBLICAR NO SITE
        </button>
        
        <button onclick="toggleEditMode(false)" class="bg-red-600/20 text-red-500 border border-red-900 px-4 py-2 rounded-lg hover:bg-red-900/50 w-full text-sm transition">
            <i class="fas fa-times"></i> Cancelar
        </button>
        
        <button onclick="clearToken()" class="text-xs text-gray-600 mt-4 underline w-full text-center hover:text-gray-400">
            Desconectar do GitHub
        </button>
    </div>

    <a href="https://wa.me/5511999999999" class="whatsapp-btn">
        <i class="fab fa-whatsapp"></i>
    </a>

    <nav class="fixed w-full z-50 glass">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-black tracking-tighter italic edit-text">
                ELECTRI<span class="text-blue-500">1000</span>
            </div>
            <div class="hidden md:flex space-x-8 items-center text-xs uppercase tracking-widest font-bold">
                <a href="#sobre" class="hover:text-blue-400 transition edit-text">Sobre</a>
                <a href="#servicos" class="hover:text-blue-400 transition edit-text">Serviços</a>
                <a href="#contato" class="bg-blue-600 px-6 py-2 rounded-full hover:bg-blue-700 transition edit-text">Solicitar Visita</a>
            </div>
        </div>
    </nav>

    <section class="relative h-screen flex items-center justify-center overflow-hidden">
        <div class="absolute inset-0 z-0">
            <img src="https://images.unsplash.com/photo-1581092334651-ddf26d9a1930?auto=format&fit=crop&q=80&w=1920" class="w-full h-full object-cover opacity-30 edit-img" alt="Background">
        </div>
        <div class="relative z-10 text-center px-4" data-aos="fade-up">
            <h1 class="text-6xl md:text-8xl font-black mb-4 italic edit-text">PRECISÃO EM <span class="text-blue-500">ENERGIA</span></h1>
            <p class="text-xl text-gray-400 max-w-2xl mx-auto mb-10 edit-text">Diagnóstico imediato e soluções definitivas para sistemas elétricos residenciais e industriais.</p>
            <div class="flex justify-center">
                <a href="#contato" class="bg-white text-black font-extrabold px-10 py-4 rounded-full hover:bg-blue-500 hover:text-white transition-all duration-300 edit-text">FALAR COM ESPECIALISTA</a>
            </div>
        </div>
    </section>

    <section id="sobre" class="py-24 bg-zinc-950">
        <div class="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-16 items-center">
            <div data-aos="fade-right">
                <h3 class="text-4xl font-bold mb-6 edit-text">Sabemos exatamente onde está o problema.</h3>
                <p class="text-gray-400 text-lg leading-relaxed mb-6 edit-text">
                    Na ELECTRI1000, não trabalhamos com suposições. Nossa equipe utiliza equipamentos de ponta para diagnósticos precisos.
                </p>
                <div class="grid grid-cols-2 gap-6 text-sm font-bold uppercase">
                    <div class="flex items-center gap-3 edit-text"><i class="fas fa-check text-blue-500"></i> Tecnologia de Ponta</div>
                    <div class="flex items-center gap-3 edit-text"><i class="fas fa-check text-blue-500"></i> Segurança Total</div>
                </div>
            </div>
            <div class="relative" data-aos="zoom-in">
                <img src="https://images.unsplash.com/photo-1621905252507-b354bcadcabc?auto=format&fit=crop&q=80&w=800" class="rounded-3xl relative z-10 border border-white/10 edit-img" alt="Tecnico">
            </div>
        </div>
    </section>

    <footer class="py-12 border-t border-white/5 text-center text-gray-600 text-sm">
        <p id="copyright-trigger" class="cursor-pointer select-none hover:text-blue-500 transition" ondblclick="startAdmin()">
            &copy; 2026 ELECTRI1000. Todos os direitos reservados.
        </p>
    </footer>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();

        // ==========================================
        // CONFIGURAÇÕES DO GITHUB (PREENCHA AQUI)
        // ==========================================
        const GITHUB_USERNAME = "caiotleal"; // Ex: joao-eletrica
        const GITHUB_REPO = "electrimil";    // Ex: site-electri1000
        const GITHUB_FILE_PATH = "index.html";        // O nome do arquivo no repo
        // ==========================================

        function startAdmin() {
            const password = prompt("Senha de Administrador:");
            if (password === "admin123") {
                toggleEditMode(true);
            } else {
                alert("Senha incorreta.");
            }
        }

        function toggleEditMode(active) {
            const adminPanel = document.getElementById('adminPanel');
            const editableTexts = document.querySelectorAll('.edit-text');
            const editableImgs = document.querySelectorAll('.edit-img');

            if (active) {
                adminPanel.style.display = 'block';
                document.body.classList.add('border-4', 'border-yellow-500');
                
                editableTexts.forEach(el => {
                    el.contentEditable = "true";
                    el.classList.add('editable-active');
                });
                
                editableImgs.forEach(el => {
                    el.style.cursor = "pointer";
                    el.style.border = "2px dashed red";
                    el.onclick = function() {
                        const newUrl = prompt("Novo link da imagem:", el.src);
                        if (newUrl) el.src = newUrl;
                    }
                });

            } else {
                adminPanel.style.display = 'none';
                document.body.classList.remove('border-4', 'border-yellow-500');
                
                editableTexts.forEach(el => {
                    el.contentEditable = "false";
                    el.classList.remove('editable-active');
                });
                editableImgs.forEach(el => {
                    el.onclick = null;
                    el.style.border = "none";
                });
            }
        }

        // --- LÓGICA DO GITHUB API ---

        async function saveToGitHub() {
            // 1. Pega ou solicita o Token
            let token = localStorage.getItem('gh_token');
            if (!token) {
                token = prompt("Insira seu Personal Access Token do GitHub (Começa com ghp_...):");
                if (!token) return;
                // Salva no navegador para não pedir de novo
                localStorage.setItem('gh_token', token);
            }

            const btn = document.getElementById('btnSave');
            const status = document.getElementById('statusMsg');
            
            // Estado de Carregamento
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
            btn.disabled = true;
            toggleEditMode(false); // Limpa as bordas de edição antes de salvar

            try {
                // 2. Prepara o conteúdo HTML
                const htmlContent = document.documentElement.outerHTML;
                
                // Codifica para Base64 (com suporte a acentos/UTF-8)
                const contentBase64 = btoa(unescape(encodeURIComponent(htmlContent)));

                // 3. Busca o SHA atual do arquivo (necessário para atualizar)
                const apiUrl = `https://api.github.com/repos/${GITHUB_USERNAME}/${GITHUB_REPO}/contents/${GITHUB_FILE_PATH}`;
                
                const getResponse = await fetch(apiUrl, {
                    headers: { 
                        "Authorization": `token ${token}`,
                        "Accept": "application/vnd.github.v3+json"
                    }
                });

                if (!getResponse.ok) throw new Error("Erro ao conectar no GitHub. Verifique Usuário/Repo ou Token.");
                const fileData = await getResponse.json();
                const sha = fileData.sha;

                // 4. Envia a atualização (PUT)
                const putResponse = await fetch(apiUrl, {
                    method: "PUT",
                    headers: {
                        "Authorization": `token ${token}`,
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        message: "Atualização via Site Admin ⚡", // Mensagem do Commit
                        content: contentBase64,
                        sha: sha
                    })
                });

                if (putResponse.ok) {
                    alert("SUCESSO! Site atualizado em tempo real.");
                    status.innerHTML = '<span class="text-green-500">Atualizado com sucesso!</span>';
                } else {
                    throw new Error("Falha ao salvar. Verifique permissões.");
                }

            } catch (error) {
                alert("ERRO: " + error.message);
                status.innerHTML = '<span class="text-red-500">Erro na conexão.</span>';
                localStorage.removeItem('gh_token'); // Limpa token se der erro
            } finally {
                btn.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> PUBLICAR NO SITE';
                btn.disabled = false;
            }
        }

        function clearToken() {
            localStorage.removeItem('gh_token');
            alert("Desconectado. Será necessário inserir o Token novamente na próxima edição.");
        }
    </script>
</body>
</html>
